// This file has been autogenerated from a class added in the UI designer.

using System;
using CloudCoin_SafeScan;
using Foundation;
using PassKit;
using UIKit;

namespace CloudCoinIOS
{
	public partial class MainViewController : UIViewController
	{
		public MainViewController (IntPtr handle) : base (handle)
		{
			
		}

		public override void ViewDidAppear(bool animated)
		{
			base.ViewDidAppear(animated);

			//var paths = new NSSearchPath()
		}

		public override void ViewDidLayoutSubviews()
		{
			makeRoundRectView(importView);
			makeRoundRectView(bankView);
			makeRoundRectView(exportView);

			base.ViewDidLayoutSubviews();
		}

		private void makeRoundRectView(UIView view)
		{
			view.Layer.CornerRadius = view.Bounds.Height / 2f;
			view.Layer.MasksToBounds = true;
		}

		partial void OnImportTouched(Foundation.NSObject sender)
		{
			var modalImportViewController = (ImportViewController)Storyboard.InstantiateViewController("ImportViewController");
			modalImportViewController.ShowInView(View, true);
			modalImportViewController.CompletedWithPassword += CompletedWithPassword;
		}

		private void CompletedWithPassword(CloudCoinFile coinFile)
		{
			var newPassViewController = (NewPassViewController)Storyboard.InstantiateViewController("NewPassViewController");
			newPassViewController.ShowInView(View, true);

			string safePassword = "";
			newPassViewController.FinishSetPassword += (password) => {
				safePassword = password;
			};

			//Safe.Instance?.Add(coinFile.Coins);
		}

		partial void OnExportTouched(Foundation.NSObject sender)
		{
			var modalExportViewController = (ExportViewController)Storyboard.InstantiateViewController("ExportViewController");
			modalExportViewController.ShowInView(View, true);
		}

		partial void OnBankTouched(Foundation.NSObject sender)
		{
			var modalBankViewController = (BankViewController)Storyboard.InstantiateViewController("BankViewController");
			modalBankViewController.ShowInView(View, true);
		}

		public override UIStatusBarStyle PreferredStatusBarStyle()
		{
			return UIStatusBarStyle.LightContent;
		}
	}
}
